---
theme: vue-pro
---
## æœ‰è¿™ä¹ˆä¸ªéœ€æ±‚

æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚, **æ‘‡æ™ƒæ‰‹æœºç§»åŠ¨å°çƒç»™å°çŒ«æä¸ªè¾¹**. 

æ‹‰äº†ä¸€å †äººè¯„ä¼°, çœ‹çœ‹å…·ä½“æ€ä¹ˆå»å®ç°.

çœ‹åˆ°è¿™éœ€æ±‚ç¡®å®æ„£äº†ä¸‹, ç„¶åä»”ç»†æƒ³äº†æƒ³, å¥½åƒä¹Ÿä¸æ˜¯å…¨æ²¡æœ‰åŠæ³•.

ä¸€ä¸ªå¾ˆä¹…æ²¡æœ‰ç”¨åˆ°çš„åŠŸèƒ½å‡ºç°åœ¨æˆ‘è„‘æµ·é‡Œ, **ã€Œé™€èºä»ªã€**.

**ä»€ä¹ˆæ˜¯é™€èºä»ª**

å®ƒæ˜¯ä¸€ç§**æ–¹å‘ä¼ æ„Ÿå™¨**, åœ¨æ¥æ”¶åˆ°æ–¹å‘æ”¹å˜çš„æ—¶å€™, è·å¾—ä¸€äº›æ•°æ®. 

æ–¹å‘æ”¹å˜äº‹ä»¶æŒ‡çš„æ˜¯æ‰‹æœºç­‰ç§»åŠ¨è®¾å¤‡åè½¬çš„æ—¶å€™è§¦å‘çš„äº‹ä»¶.

ç§»åŠ¨ç«¯å…·å¤‡çš„é™€èºä»ªåŠŸèƒ½èƒ½å¤Ÿåšçš„äº‹æƒ…å¾ˆå¤š. ä»–åœ¨æˆ‘ä»¬webä¸­å­˜åœ¨ä¸€ä¸ªAPI.

**window**å¯¹è±¡ä¸­å¯ä»¥ç›‘å¬**deviceorientation**äº‹ä»¶, æ¥è°ƒç”¨ç§»åŠ¨ç«¯çš„é™€èºä»ªä¼ æ„Ÿå™¨.

ä½†æ˜¯æˆ‘ä»¬æœ¬æ–‡ä¸»è¦ä½¿ç”¨å®ƒæ¥è¿›è¡Œæ–¹å‘çš„åˆ¤æ–­.


å°±æ˜¯ç»™è¿™åªçŒ«æä¸ªè¾¹. è§„åˆ™ --- åªèƒ½æ‘‡æ™ƒæ‰‹æœº


![WechatIMG388.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a153cba6c524707b945f1046b59eb71~tplv-k3u1fbpfcp-watermark.image?)


## åˆ†æä¸€æ³¢

é¦–å…ˆ, æ‘‡æ™ƒæ‰‹æœº, ç§»åŠ¨ç”»ç¬”æè¾¹. å­—è¶Šå°‘, äº‹è¶Šå¤§.

æˆ‘ä»¬é€šè¿‡é™€èºä»ªå›ºç„¶èƒ½æ‹¿åˆ°æ–¹å‘, ä½†æ˜¯å¦‚ä½•å»æè¾¹å‘¢?

è¯•æƒ³ä¸€ä¸‹, æˆ‘ä»¬å¯ä¸å¯ä»¥äº‹å…ˆç»˜åˆ¶å¥½è·¯å¾„, ç„¶åç§»åŠ¨ç”»ç¬”ç»˜åˆ¶è·¯å¾„å‘¢?

è²Œä¼¼å¯ä»¥, ä½†æ˜¯é—®é¢˜åˆæ¥äº†, 

å¦‚ä½•ç»˜åˆ¶è¿™ä¸€æ¡è·¯å¾„å‘¢? 

è¿™æ¡è·¯å¾„æˆ‘ä»¬éœ€è¦æ€ä¹ˆå­˜å‚¨ä¸‹æ¥å‘¢?

é€šè¿‡æ‘‡æ™ƒæ‰‹æœºå¦‚ä½•åˆ¤æ–­è·¯å¾„ç§»åŠ¨æ–¹å‘å‘¢?

**å®è·µæ˜¯æ£€éªŒä»£ç çš„å”¯ä¸€æ ‡å‡†**

æˆ‘ä»¬é¦–å…ˆæ¥åˆ¶ä½œä¸€ä¸ªç”»æ¿å·¥å…·, å¯ä»¥æ‰‹åŠ¨ç»™çŒ«çŒ«æè¾¹.


## åˆ¶ä½œä¸€ä¸ªç®€æ˜“ç‰ˆç”»æ¿å·¥å…·

é¦–å…ˆ, æˆ‘ä»¬éœ€è¦ä¸€å—ç”»æ¿, æ¥ç»˜åˆ¶æè¾¹è·¯å¾„.

è¿™é‡Œæˆ‘é€‰ç”¨**react + pixijs**æ¥æ­å»ºç”»æ¿.

é¡¹ç›®ç»“æ„æˆ‘å°±ä¸å¤šèµ˜è¿°äº†, ç›´æ¥å¼€å§‹. æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®Œæˆåçš„ç”»æ¿.

![WechatIMG376.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d694a67c083e46078df691c24a82d9c3~tplv-k3u1fbpfcp-watermark.image?)

åŠŸèƒ½ä»‹ç»:

1. è®¾ç½®ç”»ç¬”å®½åº¦âœ…
2. è®¾ç½®ç”»ç¬”é¢œè‰²âœ…
3. ç»˜åˆ¶åº•å›¾æ”¯æŒç½‘ç»œå›¾ç‰‡å’Œæœ¬åœ°å›¾ç‰‡æ‹–æ‹½âœ…
4. å±•ç¤ºå¹¶å¤åˆ¶è·¯å¾„æ•°ç»„âœ…
5. æ’¤é”€âœ…
6. æ¸…é™¤âœ…
7. æ¼”ç¤ºâœ…

### æ­å»ºèˆå°

ä½¿ç”¨**react**æ­å»ºé¡µé¢, åŒæ—¶æ­å»ºç”»å¸ƒèˆå°.æˆ‘ä»¬éœ€è¦åœ¨èˆå°ä¸Šç»˜åˆ¶è·¯å¾„.

æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹[æºç ](https://github.com/xdq1553/gyroPro)

è¿™é‡Œæˆ‘ä¸ºäº†é€‚é…ç§»åŠ¨ç«¯, ä½¿ç”¨`750*1624`çš„èˆå°å°ºå¯¸.

```js
/** åˆå§‹åŒ–èˆå° */
onInitStage = () => {
    const _c = this.stageCancas.current;
    //è®¾è®¡ç¨¿å®½é«˜
    const width = 750;
    const height = 1624;
    const app = new PIXI.Application(width, height, {
        view: _c,
        backgroundColor: 0x1099bb
    });
    app.ticker.add((deltaTime) => {

    });
    this.stage = app.stage;

    //åº•å›¾
    const barrel = this.stage.addChild(PIXI.Sprite.from("./barrel.png"));
    barrel.interactive = true;
    this.barrel = barrel;

    //çƒ
    this.ball = this.stage.addChild(PIXI.Sprite.from("./ball.png"));
    this.ball.anchor.set(this.ball.width / 2, this.ball.height / 2)

    this.onAddEvents(barrel);

    //ç»˜åˆ¶çº¿
    this.line = new PIXI.Graphics();
    this.stage.addChild(this.line);
}

```
### åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è·¯å¾„

é€šè¿‡ç›‘å¬é¼ æ ‡çš„æŒ‰ä¸‹ã€ç§»åŠ¨å’ŒæŠ¬èµ·äº‹ä»¶, åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶ä¸åŒçš„è·¯å¾„.

**é¼ æ ‡æŒ‰ä¸‹**çš„æ—¶å€™è®°å½•ç¬¬ä¸€æ­¥çš„ç¬¬ä¸€ä¸ªç¬”è§¦.

```js
this.line.lineStyle(this.state.lineWidth, this.state.color.replace("#", "0x"), 1);
this.line.moveTo(_x, _y);

//ç¬¬ä¸€ä¸ªç‚¹
this.currentPoints = [];
this.currentPoints.push({ x: _x, y: _y });
```

**é¼ æ ‡ç§»åŠ¨**çš„æ—¶å€™,å­˜å‚¨æ¯ä¸€ä¸ªç‚¹ä½, è¿™é‡Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ç¨€ç–æˆ–è€…å¯†é›†é‡‡é›†ç‚¹ä½.

```js
//æ˜¯å¦ç»˜åˆ¶ç‚¹
let disX = Math.abs(point.x - this.lastPoint.x);
let disY = Math.abs(point.y - this.lastPoint.y);
let dis = Math.sqrt(disX * disX + disY * disY);

if (dis >= 2) {
    this.line.lineStyle(this.state.lineWidth, this.state.color.replace("#", "0x"), 1);
    this.line.lineTo(point.x, point.y);

    this.lastPoint = point;
    this.currentPoints.push({
        x: Math.floor(point.x),
        y: Math.floor(point.y)
    });
}
```

åœ¨**é¼ æ ‡æŠ¬èµ·**çš„æ—¶å€™, æˆ‘ä»¬å°±å®Œæˆäº†ä¸€æ­¥å‘½ä»¤çš„ç»˜åˆ¶,å­˜å‚¨è¿™ä¸€æ­¥ç»˜åˆ¶å‘½ä»¤çš„æ‰€æœ‰ç‚¹ä½.

```js
//æ¯ä¸€æ­¥
this.step++;
this.stepPoints[this.step] = this.currentPoints;
```

ç„¶åè¾“å‡ºæ‰€æœ‰ç»˜åˆ¶æ­¥éª¤çš„æ‰€æœ‰ç‚¹ä½, æ”¾åœ¨codeæ ‡ç­¾ä¸­å±•ç¤º. 

```js
/**è¾“å‡ºæ•°ç»„ */
onGetOutPutArr = () => {
    let outArr = [];
    for (let item in this.stepPoints) {
        outArr = [...outArr, ...this.stepPoints[item]]
    }
    this.setState({
        listTextArea: outArr.length > 0 ? JSON.stringify(outArr) : "è·¯å¾„æ•°ç»„..."
    });
}
```

è¿™æ ·å­, æˆ‘ä»¬å°±å¯ä»¥ä¸€é€šè¿‡é¼ æ ‡åœ¨ç”»æ¿ä¸Šéšæ„ç»˜ç”»äº†, å¹¶ä¸”æ¯ä¸€æ¡è·¯å¾„éƒ½æœ‰è®°å½•. 

å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬åé¢åœ¨æ­£å¼é¡¹ç›®ä¸­ç»˜åˆ¶.

### ç»™ç”»ç‰ˆæ·»åŠ ä¸€äº›åŠŸèƒ½

1. æ·»åŠ ç¬”è§¦å®½åº¦
2. æ·»åŠ ç¬”è§¦é¢œè‰²

```js
state = {
        listTextArea: "è·¯å¾„æ•°ç»„...",
        color: "#ffffff", //ç”»ç¬”é¢œè‰²
        lineWidth: 8 //ç”»ç¬”å®½åº¦
    }
```

è¿™é‡Œæˆ‘ä½¿ç”¨`react-color`æ¥æ­å»ºé¢œè‰²æ‹¾å–å™¨.

```js
import { ChromePicker } from 'react-color';
```

æ•ˆæœçœŸä¸é”™.

3. æ·»åŠ å¤åˆ¶è·¯å¾„åŠŸèƒ½

é€šè¿‡`execCommand`åŠŸèƒ½æ¥å®ç°å¤åˆ¶.
```html
<input type="text" readOnly="readonly" ref={this._select} value={listTextArea} />
```

```js
this._select.current.select();
document.execCommand("Copy");
```

4. æ·»åŠ æ’¤é”€åŠŸèƒ½

é€šè¿‡æ§åˆ¶æ­¥éª¤`step`æ¥æ§åˆ¶å‘½ä»¤æ’¤é”€.

åˆ é™¤å¯¹è±¡ä¸­å¯¹åº”çš„æ­¥éª¤, ç„¶åå†é‡æ–°ä½¿ç”¨ç”»ç¬”ç»˜åˆ¶è·¯å¾„.

```js
/** æ’¤é”€ */
onUndoLastStep = () => {
    delete this.stepPoints[this.step];
    this.step--;
    //é‡æ–°ç»˜åˆ¶
    this.line.clear();
    for (let item in this.stepPoints) {
        let lineList = this.stepPoints[item];
        if (lineList && lineList.length > 0) {
            this.line.lineStyle(this.state.lineWidth, this.state.color.replace("#", "0x"), 1);
            this.line.moveTo(lineList[0].x, lineList[0].y);
            lineList.forEach(it => {
                this.line.lineTo(it.x, it.y);
            })
        }
    }
    this.onGetOutPutArr();
}
```

5. æ·»åŠ æ¸…é™¤åŠŸèƒ½

è¿™é‡Œç›´æ¥ä½¿ç”¨`clear()`æ–¹æ³•.

åŒæ—¶è®°å¾—æ¸…é™¤æ­¥éª¤å’Œåæ ‡ç‚¹.

```js
 /** æ¸…é™¤ */
onClickClear = () => {
    this.line.clear();
    this.stepPoints = {};
    this.currentPoints = [];
    this.onGetOutPutArr();
}
```

6. æ·»åŠ æ¼”ç¤ºåŠŸèƒ½

è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªå°çƒæ²¿ç€è·¯å¾„è¿åŠ¨.

```js
/** æ¼”ç¤º */
onShowDemo = () => {
    let count = 0;
    this.stage.addChild(this.ball);
    let outArr = [];
    for (let item in this.stepPoints) {
        outArr = [...outArr, ...this.stepPoints[item]]
    }
    let timer = setInterval(() => {
        move();
    }, 30);
    //ç§»åŠ¨
    const move = () => {
        count++;
        if (count >= outArr.length) {
            clearInterval(timer);
            return;
        }
        this.ball.position.set(outArr[count].x, outArr[count].y)
    }
}

```

7. æ·»åŠ æ‹–æ‹½æœ¬åœ°å›¾ç‰‡åŠŸèƒ½

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨`onDragEnter onDragOver onDrop`è¿™ä¸‰ä¸ªè§¦å‘äº‹ä»¶è¿›è¡Œæ‹–æ‹½.

å°†æœ¬åœ°å›¾ç‰‡æ‹–æ‹½å…¥ç”»æ¿ä¹‹å, æˆ‘ä»¬å°†å›¾ç‰‡æ¸²æŸ“åˆ°èˆå°ä¸­.

```js
/** å¤„ç†æ¸²æŸ“å›¾ç‰‡æ–‡ä»¶ */
processFiles = (files) => {
    var file = files[0];
    var reader = new FileReader();
    let self = this;
    reader.onload = function (e) {
        let bg = new Image();
        bg.src = e.target.result;
        //ç»˜åˆ¶
        self.barrel.texture = PIXI.Texture.from(bg);
    };
    //è¯»å–å›¾ç‰‡
    reader.readAsDataURL(file);
}
```

è¿™æ ·å­æˆ‘ä»¬çš„å»ºè®®ç”»æ¿å°±æ­å»ºå¥½äº†.

æˆ‘ä»¬æ¥çœ‹ä¸‹æ•ˆæœ.æˆ‘åœ¨ç”»æ¿ä¸­å†™äº†ä¸ªã€ŒçŒ«ã€


![WechatIMG378.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad4ae89d81c14dddbf62ea2853257f6e~tplv-k3u1fbpfcp-watermark.image?)


## ç§»åŠ¨ç«¯å¼€å‘

å‰æˆå¤ªé•¿, æ¥ä¸‹æ¥æ‰æ˜¯ä¸»è¦éœ€æ±‚.

é¦–å…ˆç»˜åˆ¶ä¸€å¼ èƒŒæ™¯å›¾, èƒŒæ™¯å›¾ä¸Šå¸¦æœ‰ä¸€åªçŒ«.

éœ€æ±‚éœ€è¦æˆ‘ä»¬æ‘‡æ™ƒæ‰‹æœº, ç§»åŠ¨å°çƒç»™å°çŒ«æè¾¹.

ä¸ºäº†æ–¹ä¾¿æ¼”ç¤º, æˆ‘ç»™è·¯å¾„å…ˆç»˜åˆ¶ä¸€æ¡**è™šçº¿**.

```js
this.realLine = new PIXI.Graphics();
this.realLine.lineStyle(8, 0xf4813e, 1);
this.realLine.moveTo(firstList[0].x, firstList[0].y);
app.stage.addChild(this.realLine);

firstList.forEach((item, index) => {
    if (index % 3 == 0) {
        if (index > 1)
            this.line.moveTo(firstList[index - 1].x, firstList[index - 1].y)
        this.line.lineTo(item.x, item.y);
    }
});
```

æ¥ç€ç»˜åˆ¶ä¸€ä¸ªå°çƒ.

åé¢ä¼šç§»åŠ¨è¿™ä¸ªå°çƒè¿›è¡Œè¿åŠ¨.

### ä½¿ç”¨é™€èºä»ª

åœ¨ç§»åŠ¨ç«¯H5é¡µé¢ä¸­ä½¿ç”¨é™€èºä»ª, è·å–å°çƒç§»åŠ¨æ–¹å‘.

> æ³¨æ„ <br/>
> é™€èºä»ªåœ¨iosä¸­è°ƒç”¨éœ€è¦æˆæƒ.<br/>
> åŒæ—¶æˆ‘ä»¬éœ€è¦ç‚¹å‡»å»è§¦å‘æˆæƒå¼¹çª—.

ä¸‹é¢æ˜¯é™€èºä»ªæˆæƒçš„ä¸€ç§å…¼å®¹å†™æ³•:

```js
// iOS 13+
if (window.DeviceOrientationEvent !== undefined && typeof window.DeviceOrientationEvent.requestPermission === 'function') {
    window.DeviceOrientationEvent.requestPermission()
        .then(function (response) {
            if (response == 'granted') {
                this.onTestGyro();
            }else{

            }
        }).catch(function (error) {
            console.log("error", error);
        });

} else {
    console.log("å¯åŠ¨")
    this.onTestGyro();
}
```
æˆæƒæˆåŠŸä¹‹å, æˆ‘ä»¬å°±å°±å¯ä»¥è·å¾—**æ–¹å‘æ•°æ®**äº†.

> æ³¨æ„<br/>
> é™€èºä»ªä¼šè¿”å›ä¸‰ä¸ªå‚æ•°.<br/>
> alpha ç»•zè½´æ—‹è½¬ beta ç»•xè½´æ—‹è½¬ gamma ç»•yè½´æ—‹è½¬.

æˆ‘è¿™é‡Œåªå¤„ç†å››ä¸ªæ–¹å‘.

```js
/** æ–¹å‘ å³ä¸Š å·¦ä¸Š å³ä¸‹ å·¦ä¸‹ */
const DIR = {
    RT: "RT",
    LT: "LT",
    LB: "LB",
    RB: "RB"
}
```
é€šè¿‡**beta**å’Œ**gamma**æ¥ç¡®è®¤æ–¹å‘, å› ä¸ºåªéœ€è¦å¹³é¢ç§»åŠ¨, å¹¶ä¸éœ€è¦3dè¿åŠ¨. æ•…åªé€‰æ‹©**betaå’Œgamma.**

å½“`e.beta`åœ¨[-180,0]èŒƒå›´çš„æ—¶å€™, æ–¹å‘ä¸º**top**, å¦åˆ™**bottom**;

å½“`e.gamma`åœ¨[-180,0]èŒƒå›´çš„æ—¶å€™, æ–¹å‘ä¸º**left**, å¦åˆ™**right**;

ä½¿ç”¨ä»£ç åˆ¤æ–­å¦‚ä¸‹:

```js
window.addEventListener("deviceorientation", (e) => {
    let _dir = "";
    if (e.beta >= -180 && e.beta <= 0) {
        _dir = _dir + "T";
    } else {
        _dir = _dir + "B";
    }
    if (e.gamma >= -180 && e.gamma <= 0) {
        _dir = "L" + _dir;

    } else {
        _dir = "R" + _dir;
    }
    // console.info("é™€èºä»ª", `x: ${e.alpha}, y: ${e.beta}, z: ${e.gamma}`, _dir);
    this.curerentDir = DIR[_dir];
}, false);
```

è¿™æ ·å°±å¯ä»¥å¾—åˆ°å®æ—¶æ–¹å‘çš„å˜åŒ–äº†.


### ç§»åŠ¨å°çƒå»ç»™çŒ«æè¾¹

æˆ‘ä»¬è¦æ€ä¹ˆå»ç§»åŠ¨å°çƒå‘¢, è¿™é‡Œéœ€è¦å°†æˆ‘ä»¬çš„è·¯å¾„æ•°ç»„åšæˆä¸€ä¸ª**åŒå‘å¾ªç¯åˆ—è¡¨**.

```js
//é“¾è¡¨
var Node = function (element) {
    this.element = element;
    this.next = null;
    this.prev = null;
};
```

ä¸ºé“¾è¡¨æ·»åŠ ä¸€ä¸ªå¯ä»¥**æ·»åŠ å…ƒç´ **çš„æ–¹æ³•:

```js
this.append = function (element) {
    var node = new Node(element),
        current,
        previous;

    if (!head) {
        head = node;
        tail = node;
        head.prev = tail;
        tail.next = head;
    } else {
        current = head;

        while (current.next !== head) {
            previous = current;
            current = current.next;
        }

        current.next = node;
        node.next = head;
        node.prev = current;
    };

    head.prev = node;

    length++;
    return true;
};

```

å®ç°ä¸€ä¸ªåŒå‘å¾ªç¯é“¾è¡¨ä¹‹å, æˆ‘ä»¬å°†æè¾¹è·¯å¾„è½¬åŒ–ä¸ºé“¾è¡¨.

```js
/**å°†åæ ‡æ•°ç»„è½¬åŒ–æˆåŒå‘é“¾è¡¨ */
dealArr2List = () => {
    const arr = firstList;
    const list = new get2LoopList();
    arr.forEach((item, index) => {
        list.append(item);
    });

    this.currentPoint = list.getHead();
}

```

å…·æœ‰**å½“å‰ç‚¹ä½ã€ä¸Šä¸€ä¸ªç‚¹ä½ä»¥åŠä¸‹ä¸€ä¸ªç‚¹ä½**. æˆ‘ä»¬æ¯ä¸€å¸§å»æ”¹å˜å°çƒçš„ä½ç½®. 

åŒæ—¶é€šè¿‡ç‚¹ä½ä¹‹é—´çš„æ¯”è¾ƒ, å¾—å‡ºä¸Šä¸€ä¸ªç‚¹ä½å’Œä¸‹ä¸€ä¸ªç‚¹ä½**ç›¸å¯¹äº**å½“å‰ç‚¹ä½çš„æ–¹å‘.

å¦‚æœæ–¹å‘ä¸é™€èºä»ªè·å–åˆ°çš„æ–¹å‘ä¸€è‡´, åˆ™ç§»åŠ¨.

```js
/** åˆ¤æ–­æ–¹å‘ */
onCheckDir = (element = {}, nextElement = {}) => {
    let _dir = "", disX = element.x - nextElement.x, disY = element.y - nextElement.y;
    //åˆ¤æ–­å¤§æ–¹å‘
    if (Math.abs(disX) > Math.abs(disY)) {
        //åˆ¤æ–­å·¦å³
        if (disX > 0) {
            _dir = "L";

        } else {
            _dir = "R";
        }
    } else {
        //åˆ¤æ–­ä¸Šä¸‹
        if (disY > 0) {
            _dir = "T";
        } else {
            _dir = "B";
        }
    }
    return this.curerentDir.indexOf(_dir) > -1 ? true : false;
}
```
ç¡®å®šäº†å¦‚ä½•ç§»åŠ¨å°çƒä¹‹å, æˆ‘ä»¬å°±éœ€è¦å»ç§»åŠ¨å°çƒ, åŒæ—¶ç»˜åˆ¶å‡ºè·¯å¾„äº†.

```js
 /** ç§»åŠ¨ */
onMoveDir = () => {
    const { element, next = {}, prev = {} } = this.currentPoint;
    const nextElement = next.element;
    const prevElement = prev.element;

    if (this.onCheckDir(element, nextElement)) {
        this.ball.x = nextElement?.x;
        this.ball.y = nextElement?.y;
        this.realLine.lineStyle(8, 0xf4813e, 1);
        this.realLine.lineTo(nextElement?.x, nextElement?.y);
        this.currentPoint = next;

    } else if (this.onCheckDir(element, prevElement)) {
        this.ball.x = prevElement?.x;
        this.ball.y = prevElement?.y;
        this.realLine.lineStyle(8, 0xf4813e, 1);
        this.realLine.lineTo(prevElement?.x, prevElement?.y);
        this.currentPoint = prev;
    }
}
```

è¿™æ ·å­å°±å¤§åŠŸå‘Šæˆäº†.

æ˜¯ä¸æ˜¯å¾ˆç®€å•. 

æ¥åˆ°è¿™ç§éœ€æ±‚çš„é‚£ä¸€ç¬é—´, äººæ˜¯è’™çš„, æ…¢æ…¢ç†ä¸€ä¸‹, å…¶å®é”™æ€ªcpäº†, ä»–ä»¬ä¹Ÿä¸å®¹æ˜“. 

æˆ‘ä»¬æ¥çœ‹ä¸‹æ¼”ç¤ºæ•ˆæœ:


![ed.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f273eb6c640045ebb614300f5077b307~tplv-k3u1fbpfcp-watermark.image?)


è¿™é‡Œè§†å±è½¬gifå¤ªå¤§äº†, æˆ‘å°±æˆªå–äº†ä¸­é—´ä¸€éƒ¨åˆ†æ©é¥°ä¸€ä¸‹, æ‰‹æœºæ‘‡æ™ƒ, æ§åˆ¶å°çƒç»™çŒ«çŒ«æäº†ä¸€ä¸ªè¾¹.

[ä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°æºç ]()


## æ€»ç»“

ä¸€å¥è¯çš„éœ€æ±‚, æˆ‘æäº†ä¸ªç”»æ¿, è¿˜åšäº†ä¸ªdemo.ğŸ¶ğŸ¶ğŸ¶

åŒæ—¶è°ƒç ”äº†é™€èºä»ªåœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨, æ‰€ä»¥ä¸èƒ½å¸¦ç€æœ‰è‰²çœ¼é•œå»çœ‹cp, ä»–ä»¬æ¯•ç«Ÿèƒ½ç»™ä½ æƒ³å‡ºå¾ˆå¤šå¥‡æ€ªçš„ç‚¹å­.

å³ä½¿è¿™äº›ç‚¹å­è®©äººçˆ±æ¨äº¤åŠ .

å¤§å®¶éƒ½é‡åˆ°è¿‡ä»€ä¹ˆå¥‡æ€ªçš„éœ€æ±‚å‘¢? 

æ¬¢è¿å¤§å®¶æ‹ç –æŒ‡æ­£, ç¬”è€…åŠŸåŠ›å°šæµ…, å¦‚æœ‰ä¸å½“ä¹‹å¤„è¯·æ–§æ­£.

**å‚è€ƒ**

[deviceorientation](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/deviceorientation_event)


**æ–‡ç« ç²—æµ…, æœ›è¯¸ä½ä¸åæ‚¨çš„è¯„è®ºå’Œç‚¹èµ~**

**æ³¨: æœ¬æ–‡ç³»ä½œè€…å‘•å¿ƒæ²¥è¡€ä¹‹ä½œ, è½¬è½½é¡»å£°æ˜**




























